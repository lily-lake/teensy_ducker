todo:
- learn and implement peak branch detection
